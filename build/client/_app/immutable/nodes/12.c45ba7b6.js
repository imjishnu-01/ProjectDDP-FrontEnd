import{S as U,i as j,s as A,k as b,q as E,a as k,l as w,m as y,r as N,h as u,c as v,n as m,b as d,G as P,H as I,I as C,e as M,aa as R,M as T,V as G,u as S}from"../chunks/index.cdd841bc.js";import{p as L}from"../chunks/stores.cc2db92c.js";import{b as q}from"../chunks/publicVar.7d3cef13.js";function H(p){let s,t,r,l,f,o,a,i,_,h,n=p[3]&&O(p);return{c(){s=b("input"),t=k(),r=b("input"),l=k(),f=b("button"),o=E("Reset Password"),a=k(),n&&n.c(),i=M(),this.h()},l(e){s=w(e,"INPUT",{type:!0,class:!0,placeholder:!0}),t=v(e),r=w(e,"INPUT",{type:!0,class:!0,placeholder:!0}),l=v(e),f=w(e,"BUTTON",{type:!0,class:!0});var c=y(f);o=N(c,"Reset Password"),c.forEach(u),a=v(e),n&&n.l(e),i=M(),this.h()},h(){m(s,"type","password"),m(s,"class","input"),m(s,"placeholder","New Password"),m(r,"type","password"),m(r,"class","input"),m(r,"placeholder","Confirm Password"),m(f,"type","button"),m(f,"class","btn bg-surface-500")},m(e,c){d(e,s,c),R(s,p[0]),d(e,t,c),d(e,r,c),R(r,p[1]),d(e,l,c),d(e,f,c),P(f,o),d(e,a,c),n&&n.m(e,c),d(e,i,c),_||(h=[T(s,"input",p[5]),T(r,"input",p[6]),T(f,"click",p[4])],_=!0)},p(e,c){c&1&&s.value!==e[0]&&R(s,e[0]),c&2&&r.value!==e[1]&&R(r,e[1]),e[3]?n?n.p(e,c):(n=O(e),n.c(),n.m(i.parentNode,i)):n&&(n.d(1),n=null)},d(e){e&&u(s),e&&u(t),e&&u(r),e&&u(l),e&&u(f),e&&u(a),n&&n.d(e),e&&u(i),_=!1,G(h)}}}function V(p){let s,t,r,l,f;return{c(){s=b("p"),t=E(p[2]),r=k(),l=b("a"),f=E("Goto Login"),this.h()},l(o){s=w(o,"P",{class:!0});var a=y(s);t=N(a,p[2]),a.forEach(u),r=v(o),l=w(o,"A",{href:!0});var i=y(l);f=N(i,"Goto Login"),i.forEach(u),this.h()},h(){m(s,"class","success-message text-green-500"),m(l,"href","/login")},m(o,a){d(o,s,a),P(s,t),d(o,r,a),d(o,l,a),P(l,f)},p(o,a){a&4&&S(t,o[2])},d(o){o&&u(s),o&&u(r),o&&u(l)}}}function O(p){let s,t;return{c(){s=b("p"),t=E(p[3]),this.h()},l(r){s=w(r,"P",{class:!0});var l=y(s);t=N(l,p[3]),l.forEach(u),this.h()},h(){m(s,"class","error-message text-red-500")},m(r,l){d(r,s,l),P(s,t)},p(r,l){l&8&&S(t,r[3])},d(r){r&&u(s)}}}function B(p){let s,t,r,l,f;function o(_,h){return _[2]?V:H}let a=o(p),i=a(p);return{c(){s=b("div"),t=b("form"),r=b("h2"),l=E("Reset Password"),f=k(),i.c(),this.h()},l(_){s=w(_,"DIV",{class:!0});var h=y(s);t=w(h,"FORM",{class:!0});var n=y(t);r=w(n,"H2",{});var e=y(r);l=N(e,"Reset Password"),e.forEach(u),f=v(n),i.l(n),n.forEach(u),h.forEach(u),this.h()},h(){m(t,"class","card p-4 flex flex-col gap-3"),m(s,"class","container flex justify-center items-center h-screen")},m(_,h){d(_,s,h),P(s,t),P(t,r),P(r,l),P(t,f),i.m(t,null)},p(_,[h]){a===(a=o(_))&&i?i.p(_,h):(i.d(1),i=a(_),i&&(i.c(),i.m(t,null)))},i:I,o:I,d(_){_&&u(s),i.d()}}}function D(p,s,t){let r;C(p,L,e=>t(7,r=e));let l="",f="",o="",a="";const i=r.params.token;async function _(){if(t(3,a=""),t(2,o=""),l!==f){t(3,a="Passwords do not match");return}try{const e=await fetch(`${q}/api/user/reset-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:i,newPassword:l})}),c=await e.json();e.ok?t(2,o=c.message):t(3,a=c.error)}catch(e){console.error(e),t(3,a="An error occurred while resetting the password")}}function h(){l=this.value,t(0,l)}function n(){f=this.value,t(1,f)}return[l,f,o,a,_,h,n]}class K extends U{constructor(s){super(),j(this,s,D,B,A,{})}}export{K as component};
