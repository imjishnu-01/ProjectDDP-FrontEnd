import{S as $,i as x,s as ee,k as _,l as b,m as k,h as u,n as m,b as y,G as d,H as j,q as w,a as P,e as J,r as g,c as S,p as te,aa as F,M as A,V as q,u as K,o as be}from"../chunks/index.cdd841bc.js";import{g as ve}from"../chunks/navigation.d517bab9.js";import{b as le}from"../chunks/publicVar.7d3cef13.js";import{g as ye,s as ae}from"../chunks/cookies.28f49f6b.js";import{m as fe}from"../chunks/stores.5e681e6c.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.60a3931d.js";function ke(a){let e,t,l,s,o,r,p,n,i,c,E,h=a[1]&&ce(a);return{c(){e=_("h2"),t=w("Resend verification email"),l=P(),s=_("input"),o=P(),r=_("button"),p=w("Send"),n=P(),h&&h.c(),i=J(),this.h()},l(f){e=b(f,"H2",{});var v=k(e);t=g(v,"Resend verification email"),v.forEach(u),l=S(f),s=b(f,"INPUT",{class:!0,type:!0,placeholder:!0}),o=S(f),r=b(f,"BUTTON",{type:!0,class:!0,style:!0});var L=k(r);p=g(L,"Send"),L.forEach(u),n=S(f),h&&h.l(f),i=J(),this.h()},h(){m(s,"class","input"),m(s,"type","text"),m(s,"placeholder","Email"),m(r,"type","button"),m(r,"class","btn bg-primary-500 ml-auto"),te(r,"width","10rem")},m(f,v){y(f,e,v),d(e,t),y(f,l,v),y(f,s,v),F(s,a[0]),y(f,o,v),y(f,r,v),d(r,p),y(f,n,v),h&&h.m(f,v),y(f,i,v),c||(E=[A(s,"input",a[4]),A(r,"click",a[3])],c=!0)},p(f,v){v&1&&s.value!==f[0]&&F(s,f[0]),f[1]?h?h.p(f,v):(h=ce(f),h.c(),h.m(i.parentNode,i)):h&&(h.d(1),h=null)},d(f){f&&u(e),f&&u(l),f&&u(s),f&&u(o),f&&u(r),f&&u(n),h&&h.d(f),f&&u(i),c=!1,q(E)}}}function Ee(a){let e,t;return{c(){e=_("h2"),t=w("You will receive an verification email shortly"),this.h()},l(l){e=b(l,"H2",{class:!0});var s=k(e);t=g(s,"You will receive an verification email shortly"),s.forEach(u),this.h()},h(){m(e,"class","text-center")},m(l,s){y(l,e,s),d(e,t)},p:j,d(l){l&&u(e)}}}function ce(a){let e,t;return{c(){e=_("p"),t=w(a[1]),this.h()},l(l){e=b(l,"P",{class:!0});var s=k(e);t=g(s,a[1]),s.forEach(u),this.h()},h(){m(e,"class","text-red-500 mt-2")},m(l,s){y(l,e,s),d(e,t)},p(l,s){s&2&&K(t,l[1])},d(l){l&&u(e)}}}function we(a){let e,t;function l(r,p){return r[2]?Ee:ke}let s=l(a),o=s(a);return{c(){e=_("div"),t=_("form"),o.c(),this.h()},l(r){e=b(r,"DIV",{class:!0});var p=k(e);t=b(p,"FORM",{class:!0});var n=k(t);o.l(n),n.forEach(u),p.forEach(u),this.h()},h(){m(t,"class","card p-4 flex flex-col gap-3"),m(e,"class","container")},m(r,p){y(r,e,p),d(e,t),o.m(t,null)},p(r,[p]){s===(s=l(r))&&o?o.p(r,p):(o.d(1),o=s(r),o&&(o.c(),o.m(t,null)))},i:j,o:j,d(r){r&&u(e),o.d()}}}function ge(a,e,t){let l="",s="",o=!1;async function r(){try{const n=await fetch(`${le}/api/user/resend-verification`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:l})});if(n.ok){const i=await n.json();t(2,o=!0)}else{const i=await n.json();t(1,s=i.error),console.error("Error resending verification email:",i.error)}}catch(n){console.error("Error resending verification email:",n),t(1,s="An error occurred while sending the verification email.")}}function p(){l=this.value,t(0,l)}return[l,s,o,r,p]}class Pe extends ${constructor(e){super(),x(this,e,ge,we,ee,{})}}function ue(a){let e,t,l,s,o;function r(i,c){return i[3]?Re:Se}let p=r(a),n=p(a);return{c(){e=_("input"),t=P(),l=_("button"),n.c(),this.h()},l(i){e=b(i,"INPUT",{class:!0,type:!0,placeholder:!0}),t=S(i),l=b(i,"BUTTON",{type:!0,class:!0,style:!0});var c=k(l);n.l(c),c.forEach(u),this.h()},h(){m(e,"class","input"),m(e,"type","text"),m(e,"placeholder","Email"),e.disabled=a[3],m(l,"type","button"),m(l,"class","btn bg-primary-500 ml-auto"),te(l,"width","10rem"),l.disabled=a[3]},m(i,c){y(i,e,c),F(e,a[0]),y(i,t,c),y(i,l,c),n.m(l,null),s||(o=[A(e,"input",a[5]),A(l,"click",a[4])],s=!0)},p(i,c){c&8&&(e.disabled=i[3]),c&1&&e.value!==i[0]&&F(e,i[0]),p!==(p=r(i))&&(n.d(1),n=p(i),n&&(n.c(),n.m(l,null))),c&8&&(l.disabled=i[3])},d(i){i&&u(e),i&&u(t),i&&u(l),n.d(),s=!1,q(o)}}}function Se(a){let e;return{c(){e=w("Send")},l(t){e=g(t,"Send")},m(t,l){y(t,e,l)},d(t){t&&u(e)}}}function Re(a){let e;return{c(){e=w("Sending...")},l(t){e=g(t,"Sending...")},m(t,l){y(t,e,l)},d(t){t&&u(e)}}}function pe(a){let e,t;return{c(){e=_("p"),t=w(a[1]),this.h()},l(l){e=b(l,"P",{class:!0});var s=k(e);t=g(s,a[1]),s.forEach(u),this.h()},h(){m(e,"class","text-red-500 mt-2")},m(l,s){y(l,e,s),d(e,t)},p(l,s){s&2&&K(t,l[1])},d(l){l&&u(e)}}}function de(a){let e,t;return{c(){e=_("p"),t=w(a[2]),this.h()},l(l){e=b(l,"P",{class:!0});var s=k(e);t=g(s,a[2]),s.forEach(u),this.h()},h(){m(e,"class","text-green-500 mt-2")},m(l,s){y(l,e,s),d(e,t)},p(l,s){s&4&&K(t,l[2])},d(l){l&&u(e)}}}function Te(a){let e,t,l,s,o,r,p,n=!a[2]&&ue(a),i=a[1]&&pe(a),c=a[2]&&de(a);return{c(){e=_("div"),t=_("form"),l=_("h2"),s=w("Reset Password"),o=P(),n&&n.c(),r=P(),i&&i.c(),p=P(),c&&c.c(),this.h()},l(E){e=b(E,"DIV",{class:!0});var h=k(e);t=b(h,"FORM",{class:!0});var f=k(t);l=b(f,"H2",{});var v=k(l);s=g(v,"Reset Password"),v.forEach(u),o=S(f),n&&n.l(f),r=S(f),i&&i.l(f),p=S(f),c&&c.l(f),f.forEach(u),h.forEach(u),this.h()},h(){m(t,"class","card p-4 flex flex-col gap-3"),m(e,"class","container")},m(E,h){y(E,e,h),d(e,t),d(t,l),d(l,s),d(t,o),n&&n.m(t,null),d(t,r),i&&i.m(t,null),d(t,p),c&&c.m(t,null)},p(E,[h]){E[2]?n&&(n.d(1),n=null):n?n.p(E,h):(n=ue(E),n.c(),n.m(t,r)),E[1]?i?i.p(E,h):(i=pe(E),i.c(),i.m(t,p)):i&&(i.d(1),i=null),E[2]?c?c.p(E,h):(c=de(E),c.c(),c.m(t,null)):c&&(c.d(1),c=null)},i:j,o:j,d(E){E&&u(e),n&&n.d(),i&&i.d(),c&&c.d()}}}function Ne(a,e,t){let l="",s="",o="",r=!1;async function p(){t(1,s=""),t(2,o=""),t(3,r=!0);try{const i=await fetch(`${le}/api/user/forgot-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:l})}),c=await i.json();i.ok?t(2,o=c.message):t(1,s=c.error)}catch(i){console.error(i),t(1,s="An error occurred while sending the email")}t(0,l=""),t(3,r=!1)}function n(){l=this.value,t(0,l)}return[l,s,o,r,p,n]}class Oe extends ${constructor(e){super(),x(this,e,Ne,Te,ee,{})}}function me(a){let e,t,l,s,o=a[3]&&he(a);return{c(){e=_("p"),t=w(a[2]),l=P(),o&&o.c(),s=J(),this.h()},l(r){e=b(r,"P",{class:!0});var p=k(e);t=g(p,a[2]),p.forEach(u),l=S(r),o&&o.l(r),s=J(),this.h()},h(){m(e,"class","text-red-500")},m(r,p){y(r,e,p),d(e,t),y(r,l,p),o&&o.m(r,p),y(r,s,p)},p(r,p){p&4&&K(t,r[2]),r[3]?o?o.p(r,p):(o=he(r),o.c(),o.m(s.parentNode,s)):o&&(o.d(1),o=null)},d(r){r&&u(e),r&&u(l),o&&o.d(r),r&&u(s)}}}function he(a){let e,t,l,s;return{c(){e=_("button"),t=w("Resend verification email"),this.h()},l(o){e=b(o,"BUTTON",{type:!0,class:!0});var r=k(e);t=g(r,"Resend verification email"),r.forEach(u),this.h()},h(){m(e,"type","button"),m(e,"class","btn bg-primary-500 ml-auto")},m(o,r){y(o,e,r),d(e,t),l||(s=A(e,"click",a[9]),l=!0)},p:j,d(o){o&&u(e),l=!1,s()}}}function _e(a){let e,t,l,s,o,r,p;return{c(){e=_("button"),t=w("Login"),l=P(),s=_("button"),o=w("Forgo Password"),this.h()},l(n){e=b(n,"BUTTON",{type:!0,class:!0,style:!0});var i=k(e);t=g(i,"Login"),i.forEach(u),l=S(n),s=b(n,"BUTTON",{class:!0});var c=k(s);o=g(c,"Forgo Password"),c.forEach(u),this.h()},h(){m(e,"type","button"),m(e,"class","btn bg-primary-500 ml-auto"),te(e,"width","10rem"),m(s,"class","text-right pe-3 text-blue-600 dark:text-blue-500")},m(n,i){y(n,e,i),d(e,t),y(n,l,i),y(n,s,i),d(s,o),r||(p=[A(e,"click",a[4]),A(s,"click",a[6])],r=!0)},p:j,d(n){n&&u(e),n&&u(l),n&&u(s),r=!1,q(p)}}}function Ie(a){let e,t,l,s,o,r,p,n,i,c,E,h,f,v,L,I,Y,C,D,G,z,B,Q,M,W,X,se,R=a[2]&&me(a),T=!a[3]&&_e(a);return{c(){e=_("div"),t=_("form"),l=_("h1"),s=w("Login"),o=P(),r=_("label"),p=_("span"),n=w("Email"),i=P(),c=_("input"),E=P(),h=_("label"),f=_("span"),v=w("Password"),L=P(),I=_("input"),Y=P(),R&&R.c(),C=P(),T&&T.c(),D=P(),G=_("hr"),z=P(),B=_("span"),Q=w("Create new account "),M=_("a"),W=w("Register"),this.h()},l(N){e=b(N,"DIV",{class:!0});var U=k(e);t=b(U,"FORM",{class:!0});var O=k(t);l=b(O,"H1",{class:!0});var re=k(l);s=g(re,"Login"),re.forEach(u),o=S(O),r=b(O,"LABEL",{class:!0});var H=k(r);p=b(H,"SPAN",{});var ie=k(p);n=g(ie,"Email"),ie.forEach(u),i=S(H),c=b(H,"INPUT",{class:!0,type:!0,placeholder:!0}),H.forEach(u),E=S(O),h=b(O,"LABEL",{class:!0});var V=k(h);f=b(V,"SPAN",{});var oe=k(f);v=g(oe,"Password"),oe.forEach(u),L=S(V),I=b(V,"INPUT",{class:!0,type:!0,placeholder:!0}),V.forEach(u),Y=S(O),R&&R.l(O),C=S(O),T&&T.l(O),D=S(O),G=b(O,"HR",{}),z=S(O),B=b(O,"SPAN",{});var Z=k(B);Q=g(Z,"Create new account "),M=b(Z,"A",{href:!0,class:!0});var ne=k(M);W=g(ne,"Register"),ne.forEach(u),Z.forEach(u),O.forEach(u),U.forEach(u),this.h()},h(){m(l,"class","text-center text-3xl font-bold"),m(c,"class","input w-full"),m(c,"type","email"),m(c,"placeholder","Email"),m(r,"class","label"),m(I,"class","input w-full"),m(I,"type","password"),m(I,"placeholder","Password"),m(h,"class","label"),m(M,"href","/register"),m(M,"class","btn bg-surface-500 m-2"),m(t,"class","card p-4 flex flex-col gap-3 w-80"),m(e,"class","container flex justify-center items-center h-screen")},m(N,U){y(N,e,U),d(e,t),d(t,l),d(l,s),d(t,o),d(t,r),d(r,p),d(p,n),d(r,i),d(r,c),F(c,a[0]),d(t,E),d(t,h),d(h,f),d(f,v),d(h,L),d(h,I),F(I,a[1]),d(t,Y),R&&R.m(t,null),d(t,C),T&&T.m(t,null),d(t,D),d(t,G),d(t,z),d(t,B),d(B,Q),d(B,M),d(M,W),X||(se=[A(c,"input",a[7]),A(I,"input",a[8])],X=!0)},p(N,[U]){U&1&&c.value!==N[0]&&F(c,N[0]),U&2&&I.value!==N[1]&&F(I,N[1]),N[2]?R?R.p(N,U):(R=me(N),R.c(),R.m(t,C)):R&&(R.d(1),R=null),N[3]?T&&(T.d(1),T=null):T?T.p(N,U):(T=_e(N),T.c(),T.m(t,D))},i:j,o:j,d(N){N&&u(e),R&&R.d(),T&&T.d(),X=!1,q(se)}}}function Le(a,e,t){let l="",s="",o="",r=!1;const p=async()=>{try{const f=await fetch(`${le}/api/user/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:l,password:s})});if(f.ok){const v=await f.json(),{token:L,userID:I}=v;ae("token",L,1),ae("userID",I,1),ve("/application/invitationReceived")}else{const v=await f.json();t(2,o=v.error),o==="Email verification pending"&&t(3,r=!0)}}catch(f){console.error("Error:",f)}};function n(){const v={type:"component",component:{ref:Pe},title:"Email verification pending",body:"Resend verification email",response:L=>console.log("Kol")};fe.trigger(v)}function i(){const v={type:"component",component:{ref:Oe},title:"Reset password",body:"Send password reset email",response:L=>console.log("Kol")};fe.trigger(v)}be(async()=>{ye("token")&&(window.location.href="/application/invitationReceived")});function c(){l=this.value,t(0,l)}function E(){s=this.value,t(1,s)}return[l,s,o,r,p,n,i,c,E,()=>n()]}class Ce extends ${constructor(e){super(),x(this,e,Le,Ie,ee,{})}}export{Ce as component};
